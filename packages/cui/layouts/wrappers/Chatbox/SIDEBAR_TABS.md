# Sidebar Tabs è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

å°† Sidebarï¼ˆä¸šåŠ¡é¡µé¢åŒºåŸŸï¼‰æ”¹é€ ä¸ºç±»ä¼¼æµè§ˆå™¨çš„å¤š Tab æ¨¡å¼ï¼Œä¸ Chatbox çš„å¤š Tab è®¾è®¡ä¿æŒä¸€è‡´ã€‚
åŒæ—¶æ”¹é€ å·¦ä¾§ä¸»èœå•ï¼Œæ”¯æŒå¤šçº§èœå•å±•ç¤ºã€‚

## å¼€å‘è§„åˆ™ âš ï¸

1. **ä¸æ”¹å˜æ•´ä½“é£æ ¼**ï¼šä¿æŒç°æœ‰çš„è§†è§‰é£æ ¼å’Œè®¾è®¡è¯­è¨€ï¼ŒåªåšåŠŸèƒ½å¢å¼º
2. **åªä½¿ç”¨é¢œè‰²å˜é‡**ï¼šæ‰€æœ‰é¢œè‰²å¿…é¡»ä½¿ç”¨ `styles/preset/vars.less` ä¸­å®šä¹‰çš„ CSS å˜é‡ï¼Œç¦æ­¢ç¡¬ç¼–ç é¢œè‰²å€¼
3. **ä¸ä½¿ç”¨ antd ç»„ä»¶**ï¼šæ‰€æœ‰ UI ç»„ä»¶è‡ªè¡Œå®ç°ï¼Œä¸ä¾èµ– antdï¼ˆä¾‹å¤–ï¼š`antd/Tooltip` å¯ç»§ç»­ä½¿ç”¨ï¼Œ`@/widgets/Icon` å¯ä½¿ç”¨ï¼‰
4. **Tabs ä¸ Chatbox è§£è€¦**ï¼šSidebar Tabs æ˜¯ç‹¬ç«‹å®ç°ï¼Œä¸ä¸ Chatbox Tabs å…±äº«ç»„ä»¶æˆ–çŠ¶æ€ï¼Œåªæ˜¯è§†è§‰ä¸Šä¿æŒä¸€è‡´

## è®¾è®¡ç›®æ ‡

1. **ç»Ÿä¸€ä½“éªŒ**ï¼šSidebar Header ä¸ Chatbox Header è§†è§‰å’Œäº¤äº’ä¸€è‡´
2. **å¤šé¡µé¢ç®¡ç†**ï¼šæ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªä¸šåŠ¡é¡µé¢ï¼Œé€šè¿‡ Tabs åˆ‡æ¢
3. **ç®€åŒ–å¯¼èˆª**ï¼šå»æ‰ Sidebar å†…çš„å¯¼èˆªèœå•ï¼Œç”±å·¦ä¾§ä¸»èœå•æ‰¿æ‹…å…¨éƒ¨å¯¼èˆª
4. **å¤šçº§èœå•**ï¼šå·¦ä¾§ä¸»èœå•æ”¯æŒå¤šçº§å±•å¼€ï¼Œå±•ç¤ºå®Œæ•´çš„èœå•æ ‘
5. **å†å²è®°å½•**ï¼šæ”¯æŒæµè§ˆå†å²ï¼Œæ–¹ä¾¿å¿«é€Ÿè®¿é—®

## è§†è§‰è®¾è®¡

### Header å¯¹æ¯”

```
Chatbox Header:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â‰¡] [æ–°å¯¹è¯] [æŠ¥é”€å’¨è¯¢Ã—] [å®¡æ‰¹æµç¨‹Ã—]                            [+] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sidebar Header (æ–°):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â‰¡] [çŸ¥è¯†åº“Ã—] [é…ç½®ä¿¡æ¯Ã—] [æŠ¥é”€è®°å½•Ã—]            [æ´»åŠ¨ç›‘è§†å™¨] [â–¡] [Ã—]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | Chatbox Header | Sidebar Header |
|------|---------------|----------------|
| å·¦ä¾§ `[â‰¡]` | èŠå¤©å†å²è®°å½• | é¡µé¢æµè§ˆå†å² |
| Tabs | èŠå¤©ä¼šè¯ï¼ˆå¯å…³é—­ï¼‰ | ä¸šåŠ¡é¡µé¢ï¼ˆå¯å…³é—­ï¼‰ |
| å³ä¾§æŒ‰é’® | `[+]` æ–°å»ºèŠå¤© | `[æ´»åŠ¨ç›‘è§†å™¨]` `[â–¡æœ€å¤§åŒ–]` `[Ã—å…³é—­]` |

### ä¸¤ä¾§å¯¹ç§°æ•ˆæœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [â‰¡] [æ–°å¯¹è¯] [æŠ¥é”€å’¨è¯¢Ã—] [å®¡æ‰¹Ã—]     [+] â”‚ â”‚ [â‰¡] [çŸ¥è¯†åº“Ã—] [é…ç½®Ã—] [æŠ¥é”€Ã—]   [ç›‘è§†å™¨] [â–¡][Ã—]â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                          â”‚ â”‚                                               â”‚ â”‚
â”‚ â”‚            Chatbox å†…å®¹                   â”‚ â”‚              Sidebar å†…å®¹ï¼ˆæ— åœ†è§’ï¼‰             â”‚ â”‚
â”‚ â”‚                                          â”‚ â”‚                                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®ç»“æ„

### SidebarTab

```typescript
interface SidebarTab {
  id: string           // å”¯ä¸€æ ‡è¯† (nanoid)
  url: string          // é¡µé¢ URL
  title: string        // Tab æ˜¾ç¤ºæ ‡é¢˜
  icon?: string        // å¯é€‰å›¾æ ‡
  timestamp: number    // æ‰“å¼€æ—¶é—´
}
```

### SidebarHistoryItem

```typescript
interface SidebarHistoryItem {
  url: string          // é¡µé¢ URL
  title: string        // é¡µé¢æ ‡é¢˜
  icon?: string        // å¯é€‰å›¾æ ‡
  lastVisited: number  // æœ€åè®¿é—®æ—¶é—´æˆ³
}
```

## Tab è¡Œä¸º

### å…¥å£

| å…¥å£ | è¡Œä¸º |
|------|------|
| å·¦ä¾§ä¸»èœå•ç‚¹å‡» | åˆ›å»ºæ–° Tabï¼Œæ¿€æ´» |
| Action navigate è°ƒç”¨ | åˆ›å»ºæ–° Tabï¼Œæ¿€æ´» |
| History ç‚¹å‡» | åˆ›å»ºæ–° Tabï¼Œæ¿€æ´» |

### è§„åˆ™

- **ç›¸åŒ URL ä¸åˆå¹¶**ï¼šå…è®¸æ‰“å¼€å¤šä¸ªç›¸åŒé¡µé¢çš„ Tabï¼ˆç±»ä¼¼æµè§ˆå™¨ï¼‰
- **æ‰€æœ‰ Tab å¯å…³é—­**ï¼šåŒ…æ‹¬ä»èœå•è¿›å…¥çš„é¡µé¢
- **å…³é—­æœ€åä¸€ä¸ª Tab**ï¼šä¿ç•™ç©ºçŠ¶æ€ï¼Œæ˜¾ç¤ºå ä½é¡µé¢
- **Tab åˆ‡æ¢**ï¼šç‚¹å‡» Tab åˆ‡æ¢æ˜¾ç¤ºå¯¹åº”å†…å®¹
- **Tab æ»šåŠ¨**ï¼šTabs è¿‡å¤šæ—¶å¯æ¨ªå‘æ»šåŠ¨

### ç©ºçŠ¶æ€

å…³é—­æ‰€æœ‰ Tab åæ˜¾ç¤ºç©ºçŠ¶æ€å ä½ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â‰¡]                                          [æ´»åŠ¨ç›‘è§†å™¨] [â–¡] [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚                                                                     â”‚
â”‚                    ä»å·¦ä¾§èœå•é€‰æ‹©é¡µé¢å¼€å§‹æµè§ˆ                          â”‚
â”‚                                                                     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Historyï¼ˆæµè§ˆå†å²ï¼‰

> âš ï¸ **æ³¨æ„**ï¼šSidebar History æ˜¯ç‹¬ç«‹å®ç°ï¼Œä¸å¤ç”¨ Chatbox History ç»„ä»¶ã€‚
> Chatbox History ä»åç«¯ API è·å–èŠå¤©ä¼šè¯åˆ—è¡¨ï¼Œè€Œ Sidebar History ä» localStorage è·å–é¡µé¢æµè§ˆè®°å½•ã€‚

### å­˜å‚¨

- **å­˜å‚¨ä½ç½®**ï¼šlocalStorage
- **å­˜å‚¨ Key**ï¼š`sidebar_history`
- **æœ€å¤§æ¡æ•°**ï¼š50 æ¡ï¼ˆå¯é…ç½®ï¼‰
- **æ’åº**ï¼šæŒ‰æœ€åè®¿é—®æ—¶é—´å€’åº

### äº¤äº’

- ç‚¹å‡» `[â‰¡]` æŒ‰é’®ï¼Œä»å·¦ä¾§æ»‘å‡º History Panel
- ç‚¹å‡»å†å²é¡¹ï¼Œåˆ›å»ºæ–° Tab å¹¶æ¿€æ´»
- æ”¯æŒåˆ é™¤å•æ¡å†å²
- æ”¯æŒæ¸…ç©ºå…¨éƒ¨å†å²

### History Panel è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚ â”‚  æµè§ˆå†å²    â”‚ [çŸ¥è¯†åº“Ã—] [é…ç½®Ã—]              [ç›‘è§†å™¨] [â–¡] [Ã—]  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ ä»Šå¤©        â”‚                                                  â”‚
â”‚ â”‚  çŸ¥è¯†åº“     â”‚                                                  â”‚
â”‚ â”‚  é…ç½®ä¿¡æ¯   â”‚                 Sidebar å†…å®¹                      â”‚
â”‚ â”‚  æŠ¥é”€è®°å½•   â”‚                                                  â”‚
â”‚ â”‚             â”‚                                                  â”‚
â”‚ â”‚ æ˜¨å¤©        â”‚                                                  â”‚
â”‚ â”‚  å®¡æ‰¹æµç¨‹   â”‚                                                  â”‚
â”‚ â”‚  å›¢é˜Ÿè®¾ç½®   â”‚                                                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ·å¼æ”¹åŠ¨

### å»æ‰çš„æ ·å¼

- `Container/style.less` ä¸­ `.content` çš„ `border-radius: 16px`
- `Container/style.less` ä¸­ `.content` çš„ `margin: 16px`
- `Container/header.less` ä¸­å¯¼èˆªèœå•ç›¸å…³æ ·å¼

### å‚è€ƒçš„æ ·å¼ï¼ˆç‹¬ç«‹å®ç°ï¼Œä¸ç›´æ¥å¤ç”¨ï¼‰

> âš ï¸ æ ¹æ®è§„åˆ™ï¼ŒSidebar Tabs å’Œ History éœ€è¦ç‹¬ç«‹å®ç°ï¼Œåªæ˜¯è§†è§‰ä¸Šå‚è€ƒ Chatbox çš„è®¾è®¡ã€‚

- å‚è€ƒ `chatbox/components/Header/index.less` çš„ Tabs è§†è§‰è®¾è®¡
- å‚è€ƒ `chatbox/components/History/index.less` çš„ History è§†è§‰è®¾è®¡
- æ‰€æœ‰æ ·å¼åœ¨ `Container/` ç›®å½•ä¸‹ç‹¬ç«‹å®ç°

## æ–‡ä»¶æ”¹åŠ¨æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨å†…å®¹ |
|------|---------|
| `index.tsx` | å¢åŠ  sidebarTabs çŠ¶æ€ç®¡ç†ï¼Œå¤„ç† Tab å¢åˆ æ”¹æŸ¥ |
| `style.less` | è°ƒæ•´æ•´ä½“å¸ƒå±€æ ·å¼ |
| `Container/index.tsx` | æ¥æ”¶ tabs propsï¼Œæ¸²æŸ“ Tab å†…å®¹ï¼Œå»æ‰å¯¼èˆªé€»è¾‘ |
| `Container/Header.tsx` | é‡æ„ä¸º Tabs æ¨¡å¼ï¼Œå¢åŠ  History æŒ‰é’® |
| `Container/header.less` | é‡å†™ä¸º Tabs æ ·å¼ |
| `Container/style.less` | å»æ‰å†…å®¹åŒºåœ†è§’å’Œ margin |

### æ–°å¢çš„æ–‡ä»¶

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `Container/History.tsx` | æµè§ˆå†å²ç»„ä»¶ |
| `Container/history.less` | å†å²ç»„ä»¶æ ·å¼ |
| `Container/Empty.tsx` | ç©ºçŠ¶æ€å ä½ç»„ä»¶ |
| `Container/types.ts` | TypeScript ç±»å‹å®šä¹‰ |

### åˆ é™¤çš„æ–‡ä»¶

| æ–‡ä»¶ | åŸå›  |
|------|------|
| `Container/Menu.tsx` | å¯¼èˆªèœå•å·²ç§»è‡³å·¦ä¾§ä¸»èœå• |
| `Container/menu.less` | å¯¹åº”æ ·å¼æ–‡ä»¶ |
| `Container/Utils.ts` | å¯¼èˆªç›¸å…³å·¥å…·å‡½æ•°ï¼ˆå¦‚ä¸å†éœ€è¦ï¼‰ |

## äº‹ä»¶å¤„ç†

### ç›‘å¬çš„äº‹ä»¶

```typescript
// æ‰“å¼€é¡µé¢ï¼ˆä» Action æˆ–èœå•ï¼‰
window.$app.Event.on('app/openSidebar', handleOpenSidebar)

// å…³é—­ Sidebar
window.$app.Event.on('app/closeSidebar', handleCloseSidebar)
```

### handleOpenSidebar é€»è¾‘

```typescript
const handleOpenSidebar = (detail: { url?: string; path?: string; title?: string }) => {
  if (detail.url || detail.path) {
    const url = detail.url || detail.path
    const title = detail.title || url
    
    // åˆ›å»ºæ–° Tab
    const newTab: SidebarTab = {
      id: nanoid(),
      url,
      title,
      timestamp: Date.now()
    }
    
    // æ·»åŠ åˆ° tabs å¹¶æ¿€æ´»
    setSidebarTabs(prev => [...prev, newTab])
    setActiveSidebarTabId(newTab.id)
    
    // æ·»åŠ åˆ°å†å²è®°å½•
    addToHistory({ url, title, lastVisited: Date.now() })
    
    // æ˜¾ç¤º Sidebar
    handleSetSidebarVisible(true)
  }
}
```

## å…¼å®¹æ€§è€ƒè™‘

### navigate.ts Action

`navigate.ts` ä¸­çš„ `app/openSidebar` äº‹ä»¶è°ƒç”¨ä¿æŒä¸å˜ï¼Œåªéœ€ç¡®ä¿ä¼ é€’æ­£ç¡®çš„å‚æ•°ï¼š

```typescript
window.$app?.Event?.emit('app/openSidebar', {
  url: fullUrl,    // æˆ– path
  title: title     // å¯é€‰
})
```

### èœå•ç‚¹å‡»

å·¦ä¾§ä¸»èœå•ç‚¹å‡»æ—¶ï¼Œè§¦å‘ç›¸åŒçš„ `app/openSidebar` äº‹ä»¶ï¼š

```typescript
const handleMenuClick = (menu: MenuItem) => {
  window.$app?.Event?.emit('app/openSidebar', {
    path: menu.path,
    title: menu.name
  })
}
```

---

## å·¦ä¾§ä¸»èœå•æ”¹é€ 

### ç°çŠ¶

å½“å‰ä¸»èœå•åªæ˜¾ç¤º `quick_items`ï¼ˆå¿«æ·èœå•ï¼‰ï¼Œæ˜¯æ‰å¹³çš„ä¸€çº§ç»“æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ Logo â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š  â”‚  â† quick_items[0]
â”‚  ğŸ“  â”‚  â† quick_items[1]
â”‚  âš™ï¸  â”‚  â† quick_items[2]
â”œâ”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤´åƒ â”‚
â””â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°è®¾è®¡

æ”¹é€ ä¸ºæ”¯æŒå¤šçº§èœå•ï¼Œå±•ç¤ºå®Œæ•´çš„èœå•æ ‘ï¼š

```
æ”¶èµ·æ¨¡å¼ (64px):                    å±•å¼€æ¨¡å¼ (240px):
â”Œâ”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Logo â”‚                           â”‚ Logo    Yao            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¤                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š  â”‚ â†’ hover æ˜¾ç¤ºå­èœå•         â”‚ ğŸ“Š æŠ¥é”€ç®¡ç†            â”‚
â”‚  ğŸ“  â”‚                           â”‚    â”œâ”€ æŠ¥é”€ç”³è¯·         â”‚
â”‚  ğŸ‘¥  â”‚                           â”‚    â”œâ”€ å®¡æ‰¹æµç¨‹         â”‚
â”‚  âš™ï¸  â”‚                           â”‚    â””â”€ æŠ¥é”€è®°å½•         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¤                           â”‚ ğŸ“ çŸ¥è¯†åº“              â”‚
â”‚ å¤´åƒ â”‚                           â”‚ ğŸ‘¥ å›¢é˜Ÿ                â”‚
â””â”€â”€â”€â”€â”€â”€â”˜                           â”‚ âš™ï¸ è®¾ç½®               â”‚
                                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚ å¤´åƒ  ç”¨æˆ·å           â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’è®¾è®¡

#### æ”¶èµ·æ¨¡å¼ (collapsed)

- å®½åº¦ï¼š64px
- åªæ˜¾ç¤ºå›¾æ ‡
- **Hover æ˜¾ç¤ºå­èœå•**ï¼šé¼ æ ‡æ‚¬åœåœ¨æœ‰å­èœå•çš„é¡¹ä¸Šæ—¶ï¼Œå³ä¾§å¼¹å‡ºå­èœå•é¢æ¿
- ç‚¹å‡»æ— å­èœå•çš„é¡¹ï¼šç›´æ¥æ‰“å¼€é¡µé¢ï¼ˆåˆ›å»º Tabï¼‰
- ç‚¹å‡»æœ‰å­èœå•çš„é¡¹ï¼šå±•å¼€å­èœå•é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š  â”‚â”‚ æŠ¥é”€ç®¡ç†         â”‚
â”‚      â”‚â”‚ â”œâ”€ æŠ¥é”€ç”³è¯·      â”‚  â† hover å¼¹å‡º
â”‚      â”‚â”‚ â”œâ”€ å®¡æ‰¹æµç¨‹      â”‚
â”‚      â”‚â”‚ â””â”€ æŠ¥é”€è®°å½•      â”‚
â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å±•å¼€æ¨¡å¼ (expanded)

- å®½åº¦ï¼š240px
- æ˜¾ç¤ºå›¾æ ‡ + æ–‡å­—
- æœ‰å­èœå•çš„é¡¹æ˜¾ç¤ºå±•å¼€/æ”¶èµ·ç®­å¤´
- ç‚¹å‡»å±•å¼€/æ”¶èµ·å­èœå•ï¼ˆæ‰‹é£ç´æ¨¡å¼æˆ–å¤šå¼€æ¨¡å¼ï¼‰
- å­èœå•ç¼©è¿›æ˜¾ç¤º

### æ•°æ®ç»“æ„

ä½¿ç”¨ç°æœ‰çš„ `App.Menu` ç±»å‹ï¼Œå·²æ”¯æŒ `children`ï¼š

```typescript
interface App.Menu {
  id?: string
  name: string
  path: string
  icon?: string | { name: string; size?: number }
  children?: App.Menu[]  // å­èœå•
  chatbox?: boolean | 'hidden' | 'visible'
}
```

### èœå•æ¥æº

æ”¹ä¸ºä½¿ç”¨å®Œæ•´çš„èœå•æ•°æ®ï¼Œè€Œéåªç”¨ `quick_items`ï¼š

```typescript
// ç°æœ‰ä»£ç 
const quick_items = global.menus?.quick || []

// æ”¹ä¸º
const menuItems = global.menus?.items || []
const settingItems = global.menus?.setting || []
// quick_items å¯ä½œä¸ºç½®é¡¶/æ”¶è—é¡¹
```

### æ–‡ä»¶æ”¹åŠ¨

| æ–‡ä»¶ | æ”¹åŠ¨å†…å®¹ |
|------|---------|
| `Menu.tsx` | æ”¯æŒå¤šçº§èœå•æ¸²æŸ“ã€hover å¼¹å‡ºã€å±•å¼€/æ”¶èµ· |
| `menu.less` | å¤šçº§èœå•æ ·å¼ã€å¼¹å‡ºé¢æ¿æ ·å¼ã€å±•å¼€åŠ¨ç”» |

### æ–°å¢ç»„ä»¶

| ç»„ä»¶ | åŠŸèƒ½ |
|------|------|
| `SubMenu.tsx` | å­èœå•å¼¹å‡ºé¢æ¿ï¼ˆæ”¶èµ·æ¨¡å¼ hover æ—¶ä½¿ç”¨ï¼‰ |
| `MenuTree.tsx` | å¯é€‰ï¼šé€’å½’æ¸²æŸ“èœå•æ ‘ç»„ä»¶ |

---

## iframe é¡µé¢å¤„ç†

### ç°æœ‰å°è£…

iframe é¡µé¢ä½¿ç”¨ `pages/web/$.tsx` å°è£…ï¼Œå·²å®ç°ï¼š
- Token/Theme/Locale è‡ªåŠ¨ä¼ é€’
- åŒå‘æ¶ˆæ¯é€šä¿¡æœºåˆ¶ï¼ˆpostMessageï¼‰
- Action å¤„ç†ï¼ˆä» iframe è§¦å‘ CUI Actionï¼‰

### Tab ä¸­çš„ iframe

å½“ Tab å†…å®¹æ˜¯ SUI é¡µé¢ï¼ˆ`/web/*` è·¯ç”±ï¼‰æ—¶ï¼š
- ä½¿ç”¨ç°æœ‰çš„ `pages/web/$.tsx` ç»„ä»¶æ¸²æŸ“
- æ¯ä¸ª Tab çš„ iframe ç‹¬ç«‹ï¼ŒURL ä¸åŒ
- åˆ‡æ¢ Tab æ—¶ï¼Œéæ¿€æ´» Tab çš„ iframe ä¿æŒæŒ‚è½½ï¼ˆä½¿ç”¨ `display: none` éšè—ï¼‰ï¼Œé¿å…é‡æ–°åŠ è½½

### é€šä¿¡æœºåˆ¶

```typescript
// ä» CUI å‘é€æ¶ˆæ¯åˆ° iframe
window.$app.Event.emit('web/sendMessage', {
  type: 'xxx',
  message: { ... }
})

// iframe å‘é€ action åˆ° CUI
window.parent.postMessage({
  type: 'action',
  message: { action, data_item, extra }
}, '*')
```
