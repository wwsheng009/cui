@import '@/styles/preset/vars.less';

// ==================== Overlay ====================
.drawerOverlay {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	width: 100%;
	display: flex;
	justify-content: flex-end;
	z-index: 10;
	animation: fadeIn 0.15s ease;
	background: rgba(0, 0, 0, 0.2);
	backdrop-filter: blur(2px);
}

// ==================== Panel ====================
.drawerPanel {
	width: 420px;
	max-width: 50%;
	min-width: 320px;
	height: 100%;
	background: linear-gradient(
		180deg,
		var(--color_mission_bg_start) 0%,
		var(--color_mission_bg_end) 100%
	);
	border-left: 1px solid var(--color_mission_glass_border);
	display: flex;
	flex-direction: column;
	animation: slideIn 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	box-shadow: -8px 0 32px rgba(0, 0, 0, 0.25);
}

// ==================== Header ====================
.drawerHeader {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	border-bottom: 1px solid var(--color_mission_glass_border);
	background: var(--color_mission_glass_bg);
	backdrop-filter: blur(16px) saturate(180%);
	flex-shrink: 0;
}

.drawerTitle {
	display: flex;
	align-items: center;
	gap: 10px;
	font-size: 14px;
	font-weight: 600;
	color: var(--color_mission_text);
	letter-spacing: 0.3px;

	:global(.xgen-icon) {
		color: var(--color_mission_accent_cyan);
	}
}

.closeBtn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 0;
	background: var(--color_mission_card_bg);
	border: 1px solid var(--color_mission_card_border);
	border-radius: 8px;
	cursor: pointer;
	color: var(--color_mission_text_muted);
	transition: all 0.2s ease;

	&:hover:not(:disabled) {
		color: var(--color_mission_text);
		border-color: var(--color_mission_text_muted);
	}

	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}
}

// ==================== Content ====================
.drawerContent {
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

// ==================== Success State ====================
.successState {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	gap: 16px;
	text-align: center;
	animation: fadeIn 0.3s ease;
}

.successIcon {
	color: var(--color_mission_accent_green);
	filter: drop-shadow(0 0 20px var(--color_mission_accent_green));
	animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.successText {
	font-size: 16px;
	font-weight: 600;
	color: var(--color_mission_text);
	letter-spacing: 0.5px;
}

// ==================== Message Area ====================
.messageArea {
	flex: 1;
	overflow-y: auto;
	padding: 20px;

	// Custom scrollbar - Mission Control style
	&::-webkit-scrollbar {
		width: 4px;
	}
	&::-webkit-scrollbar-thumb {
		background: transparent;
		border-radius: 2px;
		transition: background 0.2s ease;
	}
	&:hover::-webkit-scrollbar-thumb {
		background: var(--color_mission_ring);
	}
}

.emptyMessages {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	gap: 16px;
	text-align: center;
	padding: 24px;

	:global(.xgen-icon) {
		opacity: 0.3;
		color: var(--color_mission_accent_cyan);
	}

	.emptyTitle {
		font-size: 15px;
		font-weight: 500;
		color: var(--color_mission_text);
	}

	.emptyHint {
		font-size: 13px;
		color: var(--color_mission_text_muted);
		max-width: 280px;
		line-height: 1.6;
	}
}

// ==================== Input Area ====================
.inputArea {
	flex-shrink: 0;
	padding: 16px 20px 20px;
	border-top: 1px solid var(--color_mission_glass_border);
	background: var(--color_mission_glass_bg);
	backdrop-filter: blur(16px) saturate(180%);
}

.inputRow {
	display: flex;
	align-items: center;
	gap: 10px;
	background: var(--color_mission_card_bg);
	border: 1px solid var(--color_mission_card_border);
	border-radius: 12px;
	padding: 10px 10px 10px 16px;
	transition: all 0.25s ease;

	&:focus-within {
		border-color: var(--color_mission_accent_cyan);
		box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
	}
}

.taskInput {
	flex: 1;
	min-height: 22px;
	max-height: 120px;
	padding: 4px 0;
	border: none;
	background: transparent;
	color: var(--color_mission_text);
	font-size: 14px;
	line-height: 22px;
	resize: none;
	outline: none;

	&::placeholder {
		color: var(--color_mission_text_muted);
	}

	&:disabled {
		opacity: 0.6;
		cursor: not-allowed;
	}
}

.inputActions {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-shrink: 0;
}

// ==================== Attachments ====================
.attachmentList {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	margin-bottom: 12px;
}

.attachmentItem {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 10px;
	background: var(--color_mission_card_bg);
	border: 1px solid var(--color_mission_card_border);
	border-radius: 8px;
	font-size: 12px;
	color: var(--color_mission_text);

	:global(.xgen-icon) {
		color: var(--color_mission_accent_cyan);
	}
}

.attachmentName {
	max-width: 120px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.attachmentRemove {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 2px;
	background: transparent;
	border: none;
	cursor: pointer;
	color: var(--color_mission_text_muted);
	border-radius: 4px;
	transition: all 0.15s ease;

	&:hover {
		color: var(--color_danger);
	}
}

// ==================== Action Buttons ====================
.actionBtn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 0;
	background: transparent;
	border: 1px solid transparent;
	border-radius: 8px;
	cursor: pointer;
	color: var(--color_mission_text_muted);
	transition: all 0.2s ease;

	&:hover:not(:disabled) {
		color: var(--color_mission_accent_cyan);
		background: rgba(14, 165, 233, 0.1);
	}

	&:disabled {
		opacity: 0.4;
		cursor: not-allowed;
	}
}

.sendBtn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 0;
	background: linear-gradient(
		135deg,
		var(--color_mission_accent_cyan),
		var(--color_mission_accent_purple)
	);
	color: white;
	border: none;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.25s ease;
	box-shadow: 0 2px 8px var(--color_mission_glow_cyan);

	:global(.xgen-icon) {
		color: inherit;
	}

	&:hover:not(:disabled) {
		transform: scale(1.05);
		box-shadow: 0 4px 16px var(--color_mission_glow_cyan);
	}

	&.sendBtnDisabled {
		opacity: 0.4;
		cursor: not-allowed;
		box-shadow: none;
		transform: none;
	}
}

// ==================== Animations ====================
@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes slideIn {
	from {
		transform: translateX(100%);
	}
	to {
		transform: translateX(0);
	}
}

@keyframes scaleIn {
	from {
		transform: scale(0.5);
		opacity: 0;
	}
	to {
		transform: scale(1);
		opacity: 1;
	}
}
